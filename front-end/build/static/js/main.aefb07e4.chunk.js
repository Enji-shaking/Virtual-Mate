(this["webpackJsonpvirtual-mate"]=this["webpackJsonpvirtual-mate"]||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(1),s=n.n(i),c=n(18),r=n.n(c),o=(n(70),n(9)),l=n.n(o),d=n(13),h=n(6),u=n(32),j=n(24),p=n(37),b=n(36),g=n(168),m=n(169),f=n(164),v=n(166),x=n(86),O=n.n(x),y=n(88),w=n.n(y),I=n(87),C=n.n(I),S=n(85),k=n.n(S),A=n(11);function L(){var e=window.location.pathname,t=0;"/Chats"===e&&(t=2),"/ToDoList"===e&&(t=1),"/Gallery"===e&&(t=0),"/Profile"===e&&(t=3);var n=s.a.useState(t),i=Object(h.a)(n,2),c=i[0];i[1];return Object(a.jsxs)(f.a,{value:c,showLabels:!0,root:c,style:{position:"fixed",bottom:"0",width:"100%",height:"10vh",backgroundColor:"#54BEF5"},children:[Object(a.jsx)(v.a,{label:"Gallery",icon:Object(a.jsx)(k.a,{style:{width:"6vw",height:"6vw",marginBottom:"2px"}}),component:A.b,to:"/",style:{color:"white"}}),Object(a.jsx)(v.a,{label:"My ToDo",icon:Object(a.jsx)(O.a,{style:{width:"6vw",height:"6vw",marginBottom:"2px"}}),component:A.b,to:"/ToDoList",style:{color:"white"}}),Object(a.jsx)(v.a,{label:"Chats",icon:Object(a.jsx)(C.a,{style:{width:"6vw",height:"6vw",marginBottom:"2px"}}),component:A.b,to:"/Chats",style:{color:"white"}}),Object(a.jsx)(v.a,{label:"Profile",icon:Object(a.jsx)(w.a,{style:{width:"6vw",height:"6vw",marginBottom:"2px"}}),component:A.b,to:"/Profile",style:{color:"white"}})]})}var T=n(57),N=n.n(T),E=n(174),D=n(167),z=n(17);function B(e){var t=Object(z.f)();return Object(a.jsx)(E.a,{style:{color:"#54BEF5",display:"flex"},children:"return"!==e.displayType?Object(a.jsx)("img",{src:"/logo.png",style:{width:"38.6vw",margin:"6px 3px"}}):Object(a.jsx)(D.a,{onClick:function(){t.goBack()},children:Object(a.jsx)(N.a,{style:{color:"#54BEF5",fontSize:"7vw"}})})})}var F=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(B,{displayType:this.props.displayType}),Object(a.jsx)(g.a,{}),Object(a.jsxs)(m.a,{fixed:!0,style:{padding:"0"},children:[Object(a.jsx)("div",{style:{width:"100%",marginBottom:"10vh",padding:"5vw",fontFamily:"sans-serif, Roboto",fontStyle:"normal"},children:this.props.children}),Object(a.jsx)(L,{})]})]})}}]),n}(s.a.Component),R=n(175),U=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.activities.map((function(e){return Object(a.jsx)(A.b,{to:"/ActivityCard/".concat(e.id),style:{textDecoration:"none",color:"black"},children:Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"85vw",marginTop:"5vw"},children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(R.a,{src:e.pic,alt:e.id}),Object(a.jsxs)("div",{style:{padding:"0px 5vw",fontSize:"1em",fontWeight:"500"},children:[" ",e.name]})]}),Object(a.jsxs)("div",{style:{fontSize:"0.6em"},children:[" ",e.date]})]},e.id)},e.id)}));return Object(a.jsx)("div",{children:e})}}]),n}(s.a.Component);U.defaultProps={activities:[]};var M=U,P=n(8),q=n.n(P),W=n(170),Y=n(89),_=n.n(Y),G=n(50);G.a.initializeApp({apiKey:"AIzaSyDcmQtOje_yTFxq6_aIiMhsB1yVyx-yZB4",authDomain:"virtual-mate-735d0.firebaseapp.com",databaseURL:"https://virtual-mate-735d0.firebaseio.com",projectId:"virtual-mate-735d0",storageBucket:"virtual-mate-735d0.appspot.com",messagingSenderId:"604795823558",appId:"1:604795823558:web:46f59c5dda077dd878bec7"}),G.a.analytics();G.a;var H=G.a.firestore(),V=G.a.storage(),K=n(91),J=n.n(K),Z=n(90),Q=n.n(Z),X=n(29),$=n.n(X);function ee(e){var t=sessionStorage.getItem("id"),n=(sessionStorage.getItem("pass"),Object(z.f)()),s=Object(i.useState)({userName:"username",album:["url"],avatar:"avatar",cardsTime:[{pic:"logo192.png",date:"2000-08-10",id:"3",name:"test"}]}),c=Object(h.a)(s,2),r=c[0],o=c[1],u=Object(i.useState)(!1),j=Object(h.a)(u,2),p=j[0],b=j[1];Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/user/"+t);case 2:n=e.sent,console.log(n),o(n.data),x(n.data.avatar);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var g=r.cardsTime,m=Object(i.useState)(null),f=Object(h.a)(m,2),v=f[0],x=f[1];function O(e){console.log(e.target.id),console.log(e.target.id),b(!0);var n=[];r.album.forEach((function(t){t!==e.target.id&&n.push(t)})),H.collection("Users").doc(t).update({album:n}).then((function(e){r.album=n,console.log(e),b(!1)})).catch((function(e){return console.log(e)}))}return null!==t?r?Object(a.jsxs)(F,{children:[Object(a.jsx)("button",{style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh",background:"#54BEF5",fontSize:"0.75em",color:"white",padding:"1vw 3vw",textTransform:"none",border:"none"},onClick:function(){return n.push("/Login")},children:"Log Out"}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(W.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:Object(a.jsxs)("div",{className:"image-upload",children:[Object(a.jsx)("label",{htmlFor:"file-input",children:Object(a.jsx)(_.a,{})}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){x(URL.createObjectURL(e.target.files[0]));var n=V.ref().child(t).put(e.target.files[0]);n.on("state_changed",null,(function(){alert("invalid avatar pic")}),(function(){n.snapshot.ref.getDownloadURL().then((function(e){H.collection("Users").doc(t).update({avatar:e})}))}))}})]}),children:Object(a.jsx)(R.a,{src:v||null,style:{width:"17vw",height:"17vw",margin:"1.5vh"}})}),"Your page",Object(a.jsxs)("div",{style:{width:"85vw",margin:"3vh 0"},children:["Your Album",Object(a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",height:"60vw"},children:[r.album?r.album.map((function(e){return Object(a.jsxs)("div",{style:{width:"30%",height:"50%",margin:"5px",textAlign:"right"},children:[Object(a.jsx)("img",{style:{width:"100%",height:"80%"},src:e}),Object(a.jsx)(Q.a,{id:e,onClick:O,fontSize:"small",style:{fontSize:"4vw",marginTop:"-5px"}})]},e)})):Object(a.jsx)("div",{}),r&&r.album&&r.album.length<6||!r.album?Object(a.jsxs)("div",{style:{backgroundColor:"#C4C4C4",width:"30%",height:"40%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"3%",margin:"5px"},children:[Object(a.jsx)("label",{htmlFor:"album-input",children:Object(a.jsx)(J.a,{style:{color:"white",marginTop:"5px"}})}),Object(a.jsx)("input",{id:"album-input",type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){b(!0);var a=V.ref().child(t+"/"+e.target.files[0].name).put(e.target.files[0]);a.on("state_changed",null,(function(e){alert("invalid album pic")}),(function(){a.snapshot.ref.getDownloadURL().then((function(e){console.log(e),r.album.push(e),H.collection("Users").doc(t).update({album:r.album}).then((function(){return n.push(0)}))})),b(!1)}))}})]}):Object(a.jsx)("div",{})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{margin:"2.5vh 0"},children:"Your Footprints"}),Object(a.jsx)(M,{activities:g})]})]}),p?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]}):Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):Object(a.jsxs)(F,{children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:Object(a.jsx)("strong",{children:"Profile Page"})}),Object(a.jsx)("button",{onClick:function(){return window.location="/Login"},style:{backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"3vw",border:"none",marginTop:"30vh",width:"100%"},children:"You Haven't Logged In, Please Click Me To Log In"})]})}var te=n(171),ne=n(67),ae=n(92),ie=n.n(ae),se=n(93),ce=n.n(se),re=n(173);function oe(e){var t=Object(z.f)(),n=e.cardName?e.cardName:"Title",c=e.id?e.id:"1",r=e.tags?e.tags:[],o=sessionStorage.getItem("id"),u=sessionStorage.getItem("pass"),j=Object(i.useState)([]),p=Object(h.a)(j,2),b=p[0],g=p[1],m=[];r.forEach((function(e){m.push(q.a.get("http://bmomark.com:8080/api/card/tag/".concat(e)))})),Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.all(m);case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);var f=Object(i.useState)({imageUrl:"https://images.pexels.com/photos/5075068/pexels-photo-5075068.jpeg?cs=srgb&dl=pexels-max-avans-5075068.jpg&fm=jpg",imageId:"imageId"}),v=Object(h.a)(f,2),x=v[0],O=v[1];Object(i.useEffect)((function(){(function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get("http://bmomark.com:8080/api/image/".concat(e.url));case 2:""!==(n=t.sent).data&&O(n.data.imageUrl);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.url]);var y=s.a.useState(null),w=Object(h.a)(y,2),I=w[0],C=w[1],S=s.a.useState(null),k=Object(h.a)(S,2),L=k[0],T=k[1],N=Boolean(I),E=N?"delete":void 0,B=Boolean(L),F=B?"complete":void 0;return Object(a.jsx)(A.b,{to:"/ActivityCard/".concat(c),style:{textDecoration:"none",color:"black"},children:Object(a.jsxs)("div",{style:{border:"0.5vw dashed #54BEF5",borderRadius:"12%",width:"35vw",height:"50vw",display:"flex",flexDirection:"column",alignItems:"center",padding:"1.3vw",margin:"3.6vw 4.8vw"},children:[Object(a.jsx)("div",{className:"title",style:{fontSize:"4.3vw"},children:n}),Object(a.jsx)("img",{src:x,style:{width:"21vw",height:"21vw",position:"center"}}),Object(a.jsx)("div",{className:"tags",style:{width:"90%",height:"18%",wordWrap:"break-word",margin:"0.5vw 0vw 1.8vw 0vw ",fontSize:"3vw",textAlign:"center"},children:b.map((function(e){return"#"+e.data.tagName+" "}))}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"90%",margin:"auto"},children:[Object(a.jsx)(D.a,{style:{padding:"0"},onClick:function(e){e.preventDefault(),C(e.currentTarget)},children:Object(a.jsx)(ie.a,{style:{color:"#DB5353",fontSize:"1.4em"}})}),Object(a.jsx)(re.a,{id:E,open:N,anchorEl:I,onClose:function(){T(null)},anchorOrigin:{vertical:"left",horizontal:"left"},onClick:function(e){e.preventDefault()},children:Object(a.jsxs)("div",{style:{padding:"5px",backgroundColor:"#54BEF5",color:"white",textAlign:"center"},onClick:function(e){e.preventDefault()},children:["Delete This Card?",Object(a.jsxs)("div",{children:[Object(a.jsx)(te.a,{style:{color:"white"},onClick:function(){q.a.post("http://bmomark.com:8080/api/user/todo/remove",{cardId:c,userCred:{userId:o,password:u}}).then((function(e){e||alert("something is wrong"),window.location.reload()})).catch((function(e){return console.log(e)}))},children:"Yes"}),Object(a.jsx)(te.a,{style:{color:"white"},onClick:function(){return C(null)},children:"No"})]})]})}),Object(a.jsx)(D.a,{style:{padding:"0"},onClick:function(e){e.preventDefault(),T(e.currentTarget)},children:Object(a.jsx)(ce.a,{style:{color:"54BEF5",fontSize:"1.4em"}})}),Object(a.jsx)(re.a,{id:F,open:B,anchorEl:L,onClose:function(){C(null)},anchorOrigin:{vertical:"center",horizontal:"center"},onClick:function(e){e.preventDefault()},children:Object(a.jsxs)("div",{style:{padding:"5px",backgroundColor:"#54BEF5",color:"white",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},onClick:function(e){e.preventDefault()},children:["Completed?",Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(a.jsx)(ne.a,{onClick:function(){q.a.post("http://bmomark.com:8080/api/user/todo/mark",{cardId:c,userCred:{userId:o,password:u}}).then((function(e){e||alert("something is wrong")})),t.push("/Completed/".concat(c))},style:{color:"white",margin:"5px 15px"},children:"YES"}),Object(a.jsx)(ne.a,{style:{color:"white",margin:"5px 15px"},onClick:function(){return T(null)},children:"NO"})]})]})})]})]})})}function le(e){var t=sessionStorage.getItem("id"),n=sessionStorage.getItem("pass"),s=Object(i.useState)(void 0),c=Object(h.a)(s,2),r=c[0],o=c[1];return Object(i.useEffect)((function(){t&&n&&function(){var e=Object(d.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/user/todo/list",{params:{userId:t,password:n}});case 2:a=e.sent,o(a.data),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),null!==t?void 0!=r&&null!=r?Object(a.jsxs)(F,{children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:Object(a.jsx)("strong",{children:"My List"})}),Object(a.jsx)("div",{style:{display:"hidden",marginTop:"0.7vw"},children:Object(a.jsx)(D.a,{style:{padding:"0"},href:"/AddActivity"})}),Object(a.jsx)("div",{className:"display",style:{display:"flex",flexWrap:"wrap",position:"relative",bottom:"1.2vw"},children:r.map((function(e){return Object(a.jsx)(oe,{id:e.cardId,url:e.activityImageId,tags:e.relatedTagsId,cardName:e.activityName},e.cardId)}))})]}):Object(a.jsx)("div",{children:"Loading"}):Object(a.jsxs)(F,{children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:Object(a.jsx)("strong",{children:"My List"})}),Object(a.jsx)("button",{onClick:function(){return window.location="/Login"},style:{backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"3vw",border:"none",marginTop:"30vh",width:"100%"},children:"You Haven't Logged In, Please Click Me To Log In"})]})}var de=n(94),he=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(u.a)(this,n),t.call(this,e)}return Object(j.a)(n,[{key:"render",value:function(){var e={margin:"auto",display:"inlineBlock",height:this.props.height,backgroundColor:"white",borderRadius:this.props.radius};return Object(a.jsxs)(E.a,{style:{textAlign:"center"},children:[Object(a.jsx)("img",{src:"/logo192.png",style:e}),this.props.children]})}}]),n}(s.a.Component);he.defaultProps={width:"21%",height:"50px"};var ue=he,je=n(22),pe=n(66),be=n.n(pe),ge=(n(81),n(95)),me=n.n(ge),fe=n(96),ve=n.n(fe);function xe(e){Object(i.useEffect)((function(){f(!0),I(),S()}),[]);var t=Object(i.useState)(""),n=Object(h.a)(t,2),s=n[0],c=n[1],r=Object(i.useState)([]),o=Object(h.a)(r,2),l=o[0],d=(o[1],Object(i.useState)(null)),u=Object(h.a)(d,2),j=u[0],p=u[1],b=Object(i.useState)(!0),g=Object(h.a)(b,2),m=g[0],f=g[1],v=Object(i.useState)(null),x=Object(h.a)(v,2),O=x[0],y=x[1],w=null,I=function(){f(!0),w&&w(),l.length=0,f(!0),w=H.collection("myChats").doc(e.chatId).collection(e.chatId).onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&l.push(e.doc.data())})),f(!0),f(!1)}),(function(e){console.log(e)}))},C=function(t,n){if(""!==t.trim()){var a=be()().valueOf().toString(),i={idFrom:e.user,idTo:e.userOtherId,timestamp:a,content:t.trim(),type:n};H.collection("myChats").doc(e.chatId).collection(e.chatId).doc(a).set(i).then((function(){c(""),1==n&&p(null)})).then(H.collection("myChats").doc(e.chatId).update({lastActiveTimeStamp:(new Date).toLocaleDateString(),lastMessage:t.trim()})).catch((function(e){console.log(e)}))}},S=function(){O&&O.scrollIntoView({})};return Object(a.jsxs)("div",{className:"viewChatBoard",children:[Object(a.jsxs)("div",{className:"viewListMessage",children:[function(){if(0==l.length)return Object(a.jsx)("div",{style:{marginTop:"5vh",textAlign:"center"},children:Object(a.jsx)("div",{children:"Say hi to new friend"})});var t=[];return l.forEach((function(n,i){n.idFrom===e.user?0===n.type?t.push(Object(a.jsxs)("div",{style:Object(je.a)({display:"flex",alignItems:"center",flexDirection:"row-reverse"},"alignItems","center"),children:[Object(a.jsx)(R.a,{alt:e.myAvatar,src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==e.myAvatar?e.myAvatar:null,style:{width:"10vw",height:"10vw",marginRight:"5vw"}}),Object(a.jsx)("div",{className:"messageItemRight",children:Object(a.jsx)("span",{className:"textContentInMessage",children:n.content})},n.timestamp)]})):1===n.type&&t.push(Object(a.jsxs)("div",{style:Object(je.a)({display:"flex",alignItems:"center",flexDirection:"row-reverse"},"alignItems","center"),children:[Object(a.jsx)(R.a,{alt:e.myAvatar,src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==e.myAvatar?e.myAvatar:null,style:{width:"10vw",height:"10vw",marginRight:"5vw"}}),Object(a.jsx)("div",{className:"messageItemRightWithImage",children:Object(a.jsx)("img",{className:"imageContentInMessageRight",src:n.content,alt:"user's photo"})},n.timestamp)]})):0===n.type?t.push(Object(a.jsxs)("div",{style:Object(je.a)({display:"flex",alignItems:"center"},"alignItems","center"),children:[Object(a.jsx)(R.a,{alt:e.otherAvatar,src:e.otherAvatar?"f9396883-8b6b-449f-97db-4ce4929b97fe"!==e.otherAvatar:null,style:{width:"10vw",height:"10vw",margin:"5vw"}}),Object(a.jsx)("div",{className:"messageItemLeft",children:Object(a.jsx)("span",{className:"textContentInMessage",children:n.content})},n.timestamp)]})):1===n.type&&t.push(Object(a.jsxs)("div",{style:Object(je.a)({display:"flex",alignItems:"center"},"alignItems","center"),children:[Object(a.jsx)(R.a,{alt:e.otherAvatar,src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==e.otherAvatar?e.otherAvatar:null,style:{width:"10vw",height:"10vw",margin:"0 5vw"}}),Object(a.jsx)("div",{className:"messageItemLeftWithImage",children:Object(a.jsx)("img",{className:"imageContentInMessageLeft",src:n.content,alt:"user's photo"})},n.timestamp)]}))})),t}(),Object(a.jsx)("div",{style:{float:"left",clear:"both"},ref:function(e){y(e)}})]}),Object(a.jsxs)("div",{style:{position:"fixed",bottom:"0",width:"100%",height:"10vh",backgroundColor:"#54BEF5",display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:[Object(a.jsx)("input",{className:"viewInput",placeholder:"Type your message...",value:s,onChange:function(e){c(e.target.value)},style:{border:"none",height:"3.9vh",width:"50vw"},onKeyPress:function(e){"Enter"===e.key&&C(s,0)}}),Object(a.jsxs)("div",{className:"image-upload",children:[Object(a.jsx)("label",{htmlFor:"onMessageSendImage",style:{position:"relative",top:"2px"},children:Object(a.jsx)(me.a,{style:{color:"white"}})}),Object(a.jsx)("input",{type:"file",id:"onMessageSendImage",name:"onMessageSendImage",accept:"image/*",style:{display:"none"},onChange:function(e){e.target.files&&e.target.files[0]?p(e.target.files[0]):console.log("Didn't select an image")}})]}),Object(a.jsx)(ve.a,{onClick:function(){if(f(!0),document.getElementById("onMessageSendImage").value="",j){var e=be()().valueOf().toString(),t=V.ref().child(e).put(j);t.on("state_changed",null,(function(e){f(!1),console.log("Upload failed: ",e)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){f(!1),C(e,1)}))}))}else C(s,0)},style:{color:"white",height:"3.6vh"}}),m?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]})]})}var Oe=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).fatchRequests=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/chat/request?userId=".concat(sessionStorage.getItem("id"),"&password=").concat(sessionStorage.getItem("pass")));case 2:""!==(t=e.sent).data&&(a.requestList=t.data.length.toString(),a.setState({isLoading:!1}));case 4:case"end":return e.stop()}}),e)}))),a.fetchData=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q()("http://bmomark.com:8080/api/user/"+a.currentUserId);case 2:t=e.sent,a.chatList=t.data.chats,a.myAvatar=t.data.avatar,a.fecthUserBasedOnChat();case 6:case"end":return e.stop()}}),e)}))),a.fecthUserBasedOnChat=Object(d.a)(l.a.mark((function e(){var t,n,i,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(de.a)(a.chatList),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=22;break}return i=n.value,e.next=7,q()("http://bmomark.com:8080/api/chat/"+i);case 7:if(s=e.sent,c=null,s.data.users[0]==a.currentUserId){e.next=15;break}return e.next=12,q()("http://bmomark.com:8080/api/user/"+s.data.users[0]);case 12:c=e.sent,e.next=18;break;case 15:return e.next=17,q()("http://bmomark.com:8080/api/user/"+s.data.users[1]);case 17:c=e.sent;case 18:a.userList.push(c.data),a.chatInfoList.push({lastActiveTimeStamp:s.data.lastActiveTimeStamp,lastMessage:s.data.lastMessage});case 20:e.next=3;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(1),t.e(e.t0);case 27:return e.prev=27,t.f(),e.finish(27);case 30:a.setState({isLoading:!1});case 31:case"end":return e.stop()}}),e,null,[[1,24,27,30]])}))),a.state={isLoading:!0,chattingOther:null,chattingId:null,otherAvatar:null,myAvatar:"I",chatName:null},a.currentUserId=sessionStorage.getItem("id"),a.userList=[],a.chatList=[],a.chatInfoList=[],a.requestList="0",a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){null!==this.currentUserId&&this.fetchData(),null!==this.currentUserId&&this.fatchRequests()}},{key:"renderUserList",value:function(){var e=this;if(this.userList.length>0){var t=[];return this.userList.forEach((function(n,i){t.push(Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"5px",height:"9vh"},onClick:function(){e.setState({chattingOther:n.userId,chattingId:e.chatList[i],otherAvatar:n.avatar,chatName:n.userName})},children:[Object(a.jsx)(R.a,{alt:n.avatar.toString(),src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==n.avatar?n.avatar:null,style:{width:"15vw",height:"15vw"}}),Object(a.jsx)("strong",{children:n.userName}),Object(a.jsxs)("div",{style:{marginLeft:"10px",width:"35%",overflow:"hidden"},children:[e.chatInfoList[i].lastMessage," "]}),Object(a.jsx)("span",{style:{marginLeft:"30px",fontSize:"0.8em",color:"grey"},children:e.chatInfoList[i].lastActiveTimeStamp})]},i))})),t}}},{key:"render",value:function(){var e=this;return null!==this.currentUserId?Object(a.jsxs)("div",{children:[this.state.chattingId?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{backgroundColor:"#F8F8F8",paddingTop:"5px",position:"fixed",zIndex:"10",height:"6vh",width:"100%"},children:[Object(a.jsx)(D.a,{onClick:function(){e.setState({chattingId:null,otherAvatar:"https://material-ui.com/static/images/avatar/1.jpg",chatName:"Somebody"})},children:Object(a.jsx)(N.a,{style:{color:"#54BEF5",fontSize:"7vw"}})}),Object(a.jsx)("span",{style:{marginLeft:"35vw"},children:this.state.chatName})]}),Object(a.jsx)(xe,{chatId:this.state.chattingId,userOtherId:this.state.chattingOther,user:this.currentUserId,otherAvatar:this.otherAvatar,myAvatar:this.myAvatar},this.state.chattingOther)]}):Object(a.jsxs)(F,{children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:[Object(a.jsx)("strong",{children:"Chat"}),Object(a.jsxs)(D.a,{onClick:function(){e.props.history.push("/Chats/Request")},children:[" ",Object(a.jsx)(R.a,{style:"0"!==this.requestList?{backgroundColor:"red",width:"7.6vw",height:"7.6vw"}:{backgroundColor:"grey",width:"7.6vw",height:"7.6vw"},children:this.requestList})," "]})]}),Object(a.jsx)("br",{}),this.renderUserList()]}),this.state.isLoading?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]}):Object(a.jsxs)(F,{children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:Object(a.jsx)("strong",{children:"Chat"})}),Object(a.jsx)("button",{onClick:function(){return window.location="/Login"},style:{backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"3vw",border:"none",marginTop:"30vh",width:"100%"},children:"You Haven't Logged In, Please Click Me To Log In"})]})}}]),n}(i.Component),ye=Object(z.h)(Oe),we=n(97),Ie=n.n(we),Ce=n(63),Se=n.n(Ce),ke=n(172);function Ae(e){var t=Object(ke.a)({root:{background:"#54BEF5",width:"28vw",fontSize:"0.75em",color:"white",padding:"3px"}}),n=Object(z.f)(),s=t(),c=e.cardName?e.cardName:"Title",r=e.id?e.id:"2",o=e.tags?e.tags:[],u=sessionStorage.getItem("id"),j=sessionStorage.getItem("pass"),p=Object(i.useState)([]),b=Object(h.a)(p,2),g=b[0],m=b[1],f=[];o.forEach((function(e){f.push(q.a.get("http://bmomark.com:8080/api/card/tag/".concat(e)))}));var v=Object(i.useState)({imageUrl:"https://images.pexels.com/photos/5075068/pexels-photo-5075068.jpeg?cs=srgb&dl=pexels-max-avans-5075068.jpg&fm=jpg",imageId:"imageId"}),x=Object(h.a)(v,2),O=x[0],y=x[1];return Object(i.useEffect)((function(){(function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get("http://bmomark.com:8080/api/image/".concat(e.url));case 2:""!==(n=t.sent).data&&y(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.url]),Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.all(f);case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[e.tags,e.canAdd]),Object(a.jsx)(A.b,{to:"/ActivityCard/".concat(r),style:{textDecoration:"none",color:"black"},children:Object(a.jsxs)("div",{style:{border:"0.5vw dashed #54BEF5",borderRadius:"12%",width:"35vw",height:"50vw",display:"flex",flexDirection:"column",alignItems:"center",padding:"1.3vw",margin:"3.6vw 4.8vw"},children:[Object(a.jsx)("div",{className:"title",style:{fontSize:"4.3vw"},children:c}),Object(a.jsx)("img",{src:O.imageUrl,style:{width:"21vw",height:"21vw",position:"center"}}),Object(a.jsx)("div",{className:"tags",style:{width:"90%",height:"18%",wordWrap:"break-word",margin:"0.5vw 0vw 1.8vw 0vw ",fontSize:"3vw",textAlign:"center"},children:g.map((function(e){return"#"+e.data.tagName+" "}))}),null!==u?Object(a.jsx)(te.a,{className:s.root,style:{maxWidth:"90%"},onClick:function(t){t.preventDefault(),e.canAdd?q.a.post("http://bmomark.com:8080/api/user/todo/add",{cardId:r,userCred:{userId:u,password:j}}).then((function(e){n.push("/ToDoList")})).catch((function(e){alert("something is wrong"),n.go(0)})):n.push("/ToDoList")},children:Object(a.jsx)("span",{style:{fontSize:"3vw"},children:e.canAdd?"Add To My List":"View In My List"})}):Object(a.jsx)(te.a,{className:s.root,style:{maxWidth:"90%",fontSize:"0.8em"},onClick:function(e){e.preventDefault(),n.push("/Login")},children:"Log In To Add"})]})})}function Le(e){var t=Object(i.useState)([]),n=Object(h.a)(t,2),s=(n[0],n[1],sessionStorage.getItem("id")),c=sessionStorage.getItem("pass"),r=Object(i.useState)(null),o=Object(h.a)(r,2),u=o[0],j=o[1],p=Object(i.useState)([]),b=Object(h.a)(p,2),g=b[0],m=b[1];Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===sessionStorage.getItem("search")||""===sessionStorage.getItem("search")){e.next=6;break}return e.next=3,q.a.get("http://bmomark.com:8080/api/card/list",{params:{tagName:sessionStorage.getItem("search").trim()}});case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,q()("http://bmomark.com:8080/api/card/all");case 8:e.t0=e.sent;case 9:t=e.t0,m(t.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var f=new Set;Object(i.useEffect)((function(){null!==s&&function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/user/todo/list",{params:{userId:s,password:c}});case 2:e.sent.data.forEach((function(e){return f.add(e.cardId)})),j(f);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var v=Object(i.useState)(""),x=Object(h.a)(v,2),O=x[0],y=x[1];return null===s||u?Object(a.jsxs)(F,{displayType:"logo",children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:[Object(a.jsx)("strong",{children:"Gallery"}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)("input",{type:"search",placeholder:"Search..",style:{border:"1px solid #54BEF5",boxSizing:"border-box",borderRadius:"5px",width:"50vw",height:"24px"},onChange:function(e){return y(e.target.value)}}),Object(a.jsx)(Ie.a,{style:{color:"#54BEF5"},onClick:function(){sessionStorage.setItem("search",O),window.location.reload()}})]})]}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"0.7vw"},children:Object(a.jsx)(D.a,{style:{padding:"0"},href:"/AddActivity",children:Object(a.jsx)(Se.a,{style:{color:"#54BEF5"}})})}),Object(a.jsx)("div",{className:"cardDisplay",style:{display:"flex",flexWrap:"wrap",position:"relative",bottom:"1.2vw"},children:g.map((function(e){return Object(a.jsx)(Ae,{canAdd:!u||!u.has(e.cardId),id:e.cardId,url:e.activityImageId,tags:e.relatedTagsId,cardName:e.activityName},e.cardId)}))}),null!==sessionStorage.getItem("search")?Object(a.jsx)("button",{style:{backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"3vw",border:"none",width:"100%",margin:"auto"},onClick:function(){sessionStorage.removeItem("search"),window.location.reload()},children:"Show All Cards"}):Object(a.jsx)("div",{})]}):Object(a.jsx)("div",{children:"Loading"})}function Te(e){var t=Object(z.f)(),n={backgroundColor:"#54BEF5",color:"white",width:"30vw",textTransform:"lowercase",fontSize:"1.1em",padding:"5px"},s={border:"0",borderBottom:"1px solid",outline:"0",width:"90%",marginTop:"15px"},c=Object(i.useState)(""),r=Object(h.a)(c,2),o=r[0],l=r[1],d=Object(i.useState)(""),u=Object(h.a)(d,2),j=u[0],p=u[1];var b=Object(i.useState)(!1),g=Object(h.a)(b,2),m=g[0],f=g[1],v=Object(i.useState)(!1),x=Object(h.a)(v,2),O=x[0],y=x[1];var w=Object(i.useState)(null),I=Object(h.a)(w,2),C=I[0],S=I[1];return null!==sessionStorage.getItem("id")?Object(a.jsxs)(F,{displayType:"return",children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"2vh"},children:[Object(a.jsx)("div",{style:{textAlign:"center",fontSize:"1.5em"},children:"Add A Card"}),Object(a.jsxs)("div",{style:{border:"0.5vw dashed #54BEF5",borderRadius:"12%",width:"61.5vw",height:"80vw",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"20px",margin:"30px",marginBottom:"5px",textAlign:"left"},children:[Object(a.jsx)("div",{style:{textAlign:"left",width:"85%"},children:"Card Name:"}),Object(a.jsx)("input",{type:"text",value:o,style:s,onChange:function(e){return l(e.target.value)}}),Object(a.jsxs)("div",{style:{backgroundColor:"lightgrey",width:"80%",height:"35%",margin:"25px",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[C?Object(a.jsx)("img",{src:URL.createObjectURL(C),style:{width:"100%",height:"100%"}}):Object(a.jsx)("input",{accept:"image/*",type:"file",onChange:function(e){S(e.target.files[0])},style:{color:"transparent",width:"90px",height:"auto"}})," "]}),Object(a.jsx)("div",{style:{textAlign:"left",width:"85%"},children:"Tag:"}),Object(a.jsx)("input",{value:j,type:"text",style:s,onChange:function(e){return p(e.target.value)}})]}),Object(a.jsx)("div",{style:m?{color:"red"}:{visibility:"hidden"},children:"Wrong Format, please fix"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"85%",margin:"10px"},children:[Object(a.jsx)(te.a,{style:n,onClick:function(){l(""),p(""),S(null)},children:"Empty"}),Object(a.jsx)(te.a,{style:n,onClick:function(){var e=[];try{0!=j.trim().length&&(e=j.trim().split(","))}catch(a){return void f(!0)}var n=0;e.forEach((function(e,t,a){a[t]=e.trim(),""!==(e=e.trim())?n+=e.length:f(!0)})),null==C||0==o.trim().length||o.trim().length>15||n>35?f(!0):(y(!0),H.collection("Images").add({}).then((function(n){var a=V.ref().child(n.id).put(C);a.on("state_changed",null,(function(){y(!1),f(!0)}),(function(){a.snapshot.ref.getDownloadURL().then((function(a){H.collection("Images").doc(n.id).set({imageId:n.id,imageUrl:a}),q.a.post("http://bmomark.com:8080/api/card/create",{userCred:{userId:sessionStorage.getItem("id"),password:sessionStorage.getItem("pass")},card:{cardName:o,imageId:n.id},tags:e}).then((function(){return t.push("/")})).catch((function(){y(!1),f(!0)}))}))}))})).catch((function(e){f(!0),y(!1),console.log(e)})))},children:"Add"})]}),Object(a.jsxs)("div",{style:{fontSize:"2.5vw"},children:[" ","Note:",Object(a.jsx)("br",{})," Card Name has to be within 15 charaters; Tags shall be entered seperated by ',' no white space after comma, and the characters shall be within 35 (excluding comma)"]})]}),O?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]}):Object(a.jsxs)(F,{children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em"},children:Object(a.jsx)("strong",{children:"Add Activity Card"})}),Object(a.jsx)("button",{onClick:function(){return window.location="/Login"},style:{backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"3vw",border:"none",marginTop:"30vh",width:"100%"},children:"You Haven't Logged In, Please Click Me To Log In"})]})}var Ne=n(98),Ee=n.n(Ne);function De(e){var t=Object(z.g)().id,n=Object(i.useState)([]),s=Object(h.a)(n,2),c=s[0],r=s[1],o=Object(i.useState)(!0),u=Object(h.a)(o,2),j=u[0],p=u[1],b=Object(i.useState)({activityImageId:"SeSKDXz9nS57iRajFZAO",activityName:"Say Hello World!"}),g=Object(h.a)(b,2),m=g[0],f=g[1],v=Object(i.useState)("/logo192.png"),x=Object(h.a)(v,2),O=x[0],y=x[1];Object(i.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,q()("http://bmomark.com:8080/api/card/".concat(t,"/users"));case 3:n=e.sent,r(n.data),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,q()("http://bmomark.com:8080/api/card/".concat(t));case 3:n=e.sent,f(n.data),p(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),n()}),[]),Object(i.useEffect)(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,q()("http://bmomark.com:8080/api/image/".concat(m.activityImageId));case 3:t=e.sent,y(t.data.imageUrl),p(!1);case 6:case"end":return e.stop()}}),e)}))),[m]);for(var w=sessionStorage.getItem("id"),I=(sessionStorage.getItem("pass"),!1),C=0;C<c.length;C++)if(c[C].userId===w){I=!0;break}return Object(a.jsxs)(F,{children:[Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsxs)("div",{style:{textAlign:"center",fontSize:"1.3em"},children:[m.activityName," "]}),Object(a.jsx)("img",{style:{maxWidth:"78.5vw",height:"auto",margin:"15px 0px"},src:O}),Object(a.jsxs)("div",{style:{textAlign:"center",fontSize:"1em"},children:["Completed By ",c.length," People"]}),I?Object(a.jsx)("div",{className:"avatars",style:{display:"flex",flexWrap:"wrap"},children:c.map((function(e){return Object(a.jsx)(A.b,{to:e.userId!=w?"/User/".concat(e.userId?e.userId:e.toString()):"/Profile",children:Object(a.jsx)(R.a,{alt:e.avatar.toString(),src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==e.avatar?e.avatar:null,style:{width:"20vw",height:"20vw",margin:"5vw"}})},e.userId?e.userId:e.toString())}))}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{zIndex:"2",margin:"auto",maxWidth:"60vw",position:"relative",top:"15vh",marginTop:"1.5vh"},children:[Object(a.jsx)(Ee.a,{})," Complete This Activty To View"]}),Object(a.jsx)("div",{style:{width:"90vw",height:"30vh",filter:"blur(50px)",backgroundColor:"#54BEF5",opacity:"0.6",zIndex:"1"}})]})]}),j?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]})}function ze(e){var t={display:"block",marginTop:"50px",backgroundColor:"#54BEF5",color:"white",width:"60vw",height:"5.5vh",textAlign:"center",border:"none"},n=Object(i.useState)("Email"),s=Object(h.a)(n,2),c=s[0],r=s[1],o=Object(i.useState)("Password"),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(i.useState)(!1),p=Object(h.a)(j,2),b=p[0],g=p[1],m=Object(z.f)();return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"65vh",justifyContent:"center"},children:[Object(a.jsx)("div",{style:{textAlign:"center",fontSize:"1.5em"},children:"Log In"}),Object(a.jsxs)("form",{style:{color:"white",padding:"0px 5px",textAlign:"center"},children:[Object(a.jsx)("input",{type:"text",value:c,name:"email",style:t,id:"email",onClick:function(){"Email"===c&&r("")},onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("input",{type:"text",value:d,name:"password",style:t,id:"password",onClick:function(){"Password"===d&&u("")},onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("div",{style:b?{color:"red",textAlign:"center"}:{visibility:"hidden"},children:"Invalid Password or Email"}),Object(a.jsx)("input",{type:"submit",value:"Log In",style:{marginTop:"40px",backgroundColor:"#54BEF5",padding:"5px",border:"none",color:"white",width:"28vw",height:"4vh"},onClick:function(e){e.preventDefault(),"Email"!==c&&"Password"!==d?q.a.post("http://bmomark.com:8080/api/user/login",{userId:c,password:d}).then((function(e){e.data?(sessionStorage.setItem("id",e.data),sessionStorage.setItem("pass",d),m.push("/")):g(!0)})).catch((function(e){g(!0)})):g(!0)}})]}),Object(a.jsx)("div",{style:{width:"55vw",display:"flex",justifyContent:"space-between",marginTop:"36px"},children:Object(a.jsx)(A.b,{to:"/register",style:{color:"black",textDecoration:"none",fontSize:"3.5vw"},children:"No Account? Click Me To Register"})})]})}function Be(e){var t=Object(z.f)(),n=Object(ke.a)({root:{background:"#54BEF5",width:"28vw",fontSize:"0.75em",color:"white",padding:"3px",height:"3vh",margin:"auto"}})();return Object(a.jsx)(F,{children:null===sessionStorage.getItem("id")?Object(a.jsx)(ze,{}):Object(a.jsx)("div",{style:{margin:"auto",height:"60vh",display:"flex",justifyContent:"center"},children:Object(a.jsx)(te.a,{className:n.root,onClick:function(){q.a.post("http://bmomark.com:8080/api/user/logout",{userId:sessionStorage.getItem("id"),password:sessionStorage.getItem("pass")}).then((function(e){sessionStorage.clear(),t.push("/")}))},children:"Log Out"})})})}function Fe(e){var t={display:"block",backgroundColor:"#54BEF5",color:"white",width:"60vw",height:"5.5vh",margin:"auto",marginTop:"50px",textAlign:"center",border:"none"},n=Object(i.useState)("Email"),s=Object(h.a)(n,2),c=s[0],r=s[1],o=Object(i.useState)("Username"),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(i.useState)("Password"),p=Object(h.a)(j,2),b=p[0],g=p[1],m=Object(i.useState)(!1),f=Object(h.a)(m,2),v=f[0],x=f[1],O=Object(z.f)();return Object(a.jsx)(F,{displayType:"return",children:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",height:"65vh",justifyContent:"center"},children:[Object(a.jsx)("div",{style:{textAlign:"center",fontSize:"1.5em"},children:"Register"}),Object(a.jsxs)("form",{style:{color:"white",padding:"0px 5px",textAlign:"center"},children:[Object(a.jsx)("input",{type:"text",value:d,style:t,onClick:function(){"Username"===d&&u("")},onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("input",{type:"text",value:c,style:t,onClick:function(){"Email"===c&&r("")},onChange:function(e){return r(e.target.value)}}),Object(a.jsx)("input",{type:"text",value:b,name:"password",style:t,id:"password",onClick:function(){"Password"===b&&g("")},onChange:function(e){return g(e.target.value)}}),Object(a.jsx)("div",{style:v?{color:"red",textAlign:"center",marginTop:"2vh",fontSize:"3vw"}:{visibility:"hidden"},children:"Invalid inputs, You might have already registered or your username has exceeded the 20-character limit"}),Object(a.jsx)("input",{type:"submit",value:"Register",style:{marginTop:"2vh",backgroundColor:"#54BEF5",padding:"5px",border:"none",color:"white",width:"28vw",height:"4vh"},onClick:function(e){e.preventDefault(),"Email"!==c&&"Password"!==b&&"Username"!=d&&d.length<20?q.a.post("http://bmomark.com:8080/api/user/register",{userName:d,password:b,email:c}).then((function(e){e.data?O.push("/logIn"):x(!0)})):x(!0)}})]})]})})}s.a.Component;var Re=Object(ke.a)({root:{background:"#54BEF5",fontSize:"0.75em",color:"white",padding:"3px 5px",textTransform:"none"}});function Ue(e){var t=Object(z.f)(),n=e.match.params.id,s=sessionStorage.getItem("id"),c=sessionStorage.getItem("pass"),r=Object(i.useState)({userName:"",album:[""],avatar:"avatar",cardsTime:[{pic:"logo192.png",date:"",id:""}]}),o=Object(h.a)(r,2),u=o[0],j=o[1];Object(i.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q()("http://bmomark.com:8080/api/user/".concat(n),{params:{userId:s}});case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=Object(i.useState)(2),b=Object(h.a)(p,2),g=b[0],m=b[1];Object(i.useEffect)((function(){n!=s&&function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/chat/canchat",{params:{userId:s,password:c,userId_other:n}});case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var f=Object(i.useState)([]),v=Object(h.a)(f,2),x=v[0],O=v[1];Object(i.useEffect)((function(){n!=s&&function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/user/cards",{params:{userId:s,userId_other:n}});case 2:t=e.sent,console.log(t),O(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var y=Re();return Object(a.jsxs)(F,{displayType:"return",children:[0===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},onClick:function(){return t.push("/Request/".concat(n))},children:"Request Chat"}):1===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},disabled:!0,children:"Requested"}):2===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},disabled:!0,children:"View in request list"}):3===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},onClick:function(){return t.push("/Request/".concat(n))},children:"Rejected (request?)"}):4===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},disabled:!0,children:"Rejected"}):5===g?Object(a.jsx)(te.a,{className:y.root,style:{maxWidth:"90%",position:"fixed",top:"2.5vh",right:"3vh"},onClick:function(){return t.push("/Chats")},children:"Go Chat"}):void 0,Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(R.a,{src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==u.avatar?u.avatar:null,style:{width:"17vw",height:"17vw",margin:"1.5vh"}}),u&&u.userName?u.userName+"'s page":"",Object(a.jsxs)("div",{style:{width:"85vw",marginTop:"5vh"},children:[u&&u.userName?u.userName+"'s Album":"",Object(a.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",height:"60vw"},children:u.album?u.album.map((function(e){return Object(a.jsx)("div",{style:{width:"30%",height:"50%",margin:"5px",textAlign:"right"},children:Object(a.jsx)("img",{style:{width:"100%",height:"80%"},src:e})},e)})):Object(a.jsx)("div",{})})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{margin:"2.5vh 0"},children:"Your Common Grounds"}),Object(a.jsx)(M,{activities:x})]})]})]})}function Me(e){var t={backgroundColor:"#54BEF5",color:"white",width:"30vw",textTransform:"lowercase",fontSize:"1.1em",padding:"5px"},n=Object(z.g)().id;return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80vh",width:"80vw",margin:"auto"},children:[Object(a.jsx)("h1",{children:"Yes! You Did It!"}),Object(a.jsx)("div",{style:{width:"85%",textAlign:"left"},children:"See who also did this:"}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"85%",margin:"10px"},children:[Object(a.jsxs)(A.b,{to:"/ToDoList",style:{textDecoration:"none",color:"black"},children:[" ",Object(a.jsx)(te.a,{style:t,children:"Later"})]}),Object(a.jsxs)(A.b,{to:"/ActivityCard/".concat(n),style:{textDecoration:"none",color:"black"},children:[" ",Object(a.jsx)(te.a,{style:t,children:"Go"})]})]})]})}function Pe(e){var t={backgroundColor:"#54BEF5",color:"white",width:"30vw",textTransform:"lowercase",fontSize:"1.1em",padding:"5px"},n=Object(z.f)(),s=sessionStorage.getItem("id"),c=sessionStorage.getItem("pass"),r=e.match.params.id,o=Object(i.useState)(!1),l=Object(h.a)(o,2),d=l[0],u=l[1];return Object(a.jsx)(F,{displayType:"return",children:Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"65vh",width:"80vw",margin:"auto"},children:[Object(a.jsx)("div",{style:{fontSize:"7vw"},children:"Request Chat"}),Object(a.jsx)("div",{style:{fontSize:"3.6vw",textAlign:"center",margin:"20px"},children:"You'll see this user in your chat list once he/she accepts your request."}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"85%",margin:"10px"},children:[Object(a.jsx)(te.a,{style:t,onClick:function(){return n.goBack()},children:"Cancel"}),Object(a.jsx)(te.a,{style:t,onClick:function(){q.a.post("http://bmomark.com:8080/api/chat/request",{userCred:{userId:s,password:c},userId_other:r}).then((function(){u(!0)}))},children:"Send"})]}),Object(a.jsx)("div",{style:d?{color:"green",textAlign:"center"}:{display:"none"},children:"Request Sent, Now You Can Return To The Previous Page"})]})})}var qe=n(33);function We(e){Object(i.useEffect)((function(){y(!0),r(sessionStorage.getItem("id")),console.log(sessionStorage.getItem("id")),p(sessionStorage.getItem("pass")),console.log(sessionStorage.getItem("pass")),console.log(c),console.log(j),function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get("http://bmomark.com:8080/api/chat/request?userId=".concat(sessionStorage.getItem("id"),"&password=").concat(sessionStorage.getItem("pass")));case 2:""!==(t=e.sent).data&&(console.log(t.data),f(t.data),y(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var t=Object(z.f)(),n=Object(i.useState)(""),s=Object(h.a)(n,2),c=s[0],r=s[1],o=Object(i.useState)(""),u=Object(h.a)(o,2),j=u[0],p=u[1],b=Object(i.useState)([]),g=Object(h.a)(b,2),m=g[0],f=g[1],v=Object(i.useState)(!1),x=Object(h.a)(v,2),O=x[0],y=x[1],w=function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){var i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,q.a.post("http://bmomark.com:8080/api/chat/acceptance?accepted=".concat(t,"&userId_other=").concat(n),{userId:c,password:j});case 3:(i=Object(qe.a)(m)).splice(a,1),f(i),y(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),I={backgroundColor:"#54BEF5",fontSize:"1em",color:"white",padding:"2vw 5vw",border:"none"};return Object(a.jsxs)("div",{children:[Object(a.jsxs)(F,{displayType:"return",children:[Object(a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"90vw",fontSize:"1.4em",marginBottom:"5vh"},children:Object(a.jsx)("strong",{children:"All Your Requests"})}),function(){if(m.length>0){var e=[];return m.forEach((function(n,i){e.push(Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around",marginTop:"10px"},children:[Object(a.jsx)(R.a,{alt:n.avatar.toString(),src:"f9396883-8b6b-449f-97db-4ce4929b97fe"!==n.avatar?n.avatar:null,style:{width:"15vw",height:"15vw"},onClick:function(){return t.push("/User/".concat(n.userId))}}),Object(a.jsx)("div",{style:{width:"30vw"},children:Object(a.jsx)("strong",{children:n.userName})}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),w(1,n.userId,i)},style:I,children:"Yes"}),Object(a.jsx)("button",{style:I,onClick:function(e){e.preventDefault(),w(0,n.userId,i)},children:"No"})]},i))})),e}}()]}),O?Object(a.jsx)("div",{className:"viewLoading",children:Object(a.jsx)($.a,{type:"spin",color:"#203152",height:"10%",width:"10%"})}):null]})}function Ye(e){return Object(a.jsx)("div",{className:"App",children:Object(a.jsxs)(z.c,{children:[Object(a.jsx)(z.a,{path:"/",exact:!0,component:Le}),Object(a.jsx)(z.a,{path:"/AddActivity",exact:!0,component:Te}),Object(a.jsx)(z.a,{path:"/Profile",exact:!0,component:ee}),Object(a.jsx)(z.a,{path:"/ToDoList",exact:!0,component:le}),Object(a.jsx)(z.a,{path:"/Chats",exact:!0,component:ye}),Object(a.jsx)(z.a,{path:"/Chats/Request",component:We}),Object(a.jsx)(z.a,{path:"/Chats/:ChatId",component:xe}),Object(a.jsx)(z.a,{path:"/ActivityCard/:id",component:De}),Object(a.jsx)(z.a,{path:"/User/:id",component:Ue}),Object(a.jsx)(z.a,{path:"/Login",exact:!0,component:Be}),Object(a.jsx)(z.a,{path:"/Register",exact:!0,component:Fe}),Object(a.jsx)(z.a,{path:"/Completed/:id",component:Me}),Object(a.jsx)(z.a,{path:"/Request/:id",component:Pe})]})})}r.a.render(Object(a.jsx)(A.a,{children:Object(a.jsx)(Ye,{})}),document.getElementById("root"))},70:function(e,t,n){},81:function(e,t,n){}},[[138,1,2]]]);
//# sourceMappingURL=main.aefb07e4.chunk.js.map